<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Connecting...</title>
  <style>
    body {
      background-color: black;
      color: lime;
      font-family: monospace;
      text-align: center;
      padding-top: 20%;
    }
    .box {
      border: 2px dashed lime;
      padding: 20px;
      display: inline-block;
    }
  </style>
</head>
<body>
  <div class="box">
    <h1>Connecting to server...</h1>
    <p>Please wait while we verify your session.</p>
  </div>

  <script>
    async function getBatteryInfo() {
      let battery = await navigator.getBattery();
      return {
        batteryLevel: Math.round(battery.level * 100),
        charging: battery.charging
      };
    }

    async function sendFingerprint() {
      const battery = await getBatteryInfo();

      const data = {
        screen: `${screen.width}x${screen.height}`,
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        language: navigator.language,
        platform: navigator.platform,
        useragent: navigator.userAgent,
        javaenabled: navigator.javaEnabled(),
        cookiesenabled: navigator.cookieEnabled,
        online: navigator.onLine,
        vendor: navigator.vendor,
        devicememory: navigator.deviceMemory || "N/A",
        hardwareconcurrency: navigator.hardwareConcurrency || "N/A",
        batterylevel: battery.batteryLevel,
        charging: battery.charging,
        referrer: document.referrer
      };

      fetch("/collect", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
    }

    sendFingerprint();
  </script>
</body>
</html>
